#include "MRKApplication.h"
#include "components/MRKGuiComponent.h"
#include "components/MRKGuiComponentDebugger.h"
#include "components/MRKGuiComponentLoader.h"
#include "gui/MRKGUI.h"
#include "../mrkui/MRKUI.h"
#include "gui/MRKGuiBaseLabel.h"

namespace MRK
{
    int mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::m5chcdJk7upS3cz6ag0NYg5BiaTGkVaUmnjy4VyM6 = 0;
    pthread_t mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::m9h35DiWnvUpBooTkcIqOBXkG2kwD8ttmcJf26wIF;
    int mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::m7y4WTa6PA1SJ5rooPPBhWErWqfdWDDitf6RjoHuS;
    bool mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::m7rcmEO5lRezOtsm2JcVkMJEykrd6WlyQN4M1AukE;
    bool mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mUVt8gjpCIPNgwsNq1moA7FfQSkqY6XfenDNylnn1;
    _STD chrono::milliseconds mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mJMtOMGTQy5Xgimaji6ezhTvdYrd1EmDcNCuxVSAP;
    _GUI mLLC1G9g9RusnmNty9KZX82ZwmkBm2e0NqMib4lnu *mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4;
    float mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mjSo6dt2PHu7B3TkYdZJqIJ33IvR6svFqi55H2Du6;
    mCuAMfODB569UuzV4u5NfoEGn54kQwF36WEwadIWT mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4;
    mCuAMfODB569UuzV4u5NfoEGn54kQwF36WEwadIWT mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin;
    float mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mFWNm3wjt8JXdkB40sAzTtwReZBMbKEKZhW1YKFVA;
    _STD vector<void(*)()> mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mkMhDXVz46JPcfwSkMQ8LYemn7e8kbIbq7BnnSvZa;
    _GUI miK2pdCvvX9dauu0Sr4BLyoc5i16tzdlgES5bQtad* mZ5tGIyp4GOcJtEZHN17sp6QgG6OkihEwDgfVq9vk = 0;

    void mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::m9ieSuFdI3t7BIGXS2DbPPUhnmVn0CdTm8EjiCWNj(int framerate)
    {
        if (m5chcdJk7upS3cz6ag0NYg5BiaTGkVaUmnjy4VyM6 == framerate)
            return;
        m5chcdJk7upS3cz6ag0NYg5BiaTGkVaUmnjy4VyM6 = framerate;
        mJMtOMGTQy5Xgimaji6ezhTvdYrd1EmDcNCuxVSAP = _STD chrono::milliseconds((int) ((1.f / ((float) framerate)) * 1000));
        mUVt8gjpCIPNgwsNq1moA7FfQSkqY6XfenDNylnn1 = true;
    }

    void mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::m4q0Eg79jSE80cIcPuyiMhGIpGtRXE1EXgDnA6FZn(int framerate, _GUI mLLC1G9g9RusnmNty9KZX82ZwmkBm2e0NqMib4lnu *uidisplay)
    {
        if (mHbNIdBsM46EIbgHCySSJ1DYjF8VCnKopzQD3hjK8())
            throw _STD runtime_error(MRK::mBkUcI2aPdzBk0pLQkqGsSAXLurlQ5bCe2w5LnsKQ(-2147483514,"|czpAA]XRPEX^_P]CTPUHX_EXP]XKTU", new unsigned char [5] { (unsigned char)0, (unsigned char)0, (unsigned char)0, (unsigned char)0, (unsigned char)0 }).c_str());
        m7y4WTa6PA1SJ5rooPPBhWErWqfdWDDitf6RjoHuS |= 1;
        m7rcmEO5lRezOtsm2JcVkMJEykrd6WlyQN4M1AukE = true;
        m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4 = uidisplay;
        mjSo6dt2PHu7B3TkYdZJqIJ33IvR6svFqi55H2Du6 = 0;
        mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4 = mCuAMfODB569UuzV4u5NfoEGn54kQwF36WEwadIWT{
            _STD chrono::system_clock::now(),
            _STD chrono::system_clock::now()
        };
        mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin = mCuAMfODB569UuzV4u5NfoEGn54kQwF36WEwadIWT{
                _STD chrono::system_clock::now(),
                _STD chrono::system_clock::now()
        };
        m9ieSuFdI3t7BIGXS2DbPPUhnmVn0CdTm8EjiCWNj(framerate);
        mFWNm3wjt8JXdkB40sAzTtwReZBMbKEKZhW1YKFVA = 0.f;

        mZ5tGIyp4GOcJtEZHN17sp6QgG6OkihEwDgfVq9vk = new _GUI miK2pdCvvX9dauu0Sr4BLyoc5i16tzdlgES5bQtad(m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4, _GUI MRK_ANCHOR_BOTTOM_LEFT,
                                            _MATH m6EWrFAq3DW6rO5ColwCzRcAgNAkT9euT3PCHpeIz(5.f, 30.f, 200.f, 30.f),
                                            MRK::mBkUcI2aPdzBk0pLQkqGsSAXLurlQ5bCe2w5LnsKQ(-2147483513,"|czuPv^UBv}UTVQSV]U", new unsigned char [4] { (unsigned char)0, (unsigned char)64, (unsigned char)204, (unsigned char)0 }).c_str(), 22,
                                                 _GUI MRKLabelAlignment::MRK_ALIGN_LEFT,
                                                 _GUI myRWG6Xhws2jYnEDyHhxIoUJQ0EX9b37yLNICo6GB::Exo2Bold,
                                                 _GUI MRKLabelFlags::mOYULCKMSJUHTR75v2BSJtYiMGFGBHk7bQKiB5kex);
    }

    void *mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::UpdateComponents(void *)
    {
        int loaderState = 1;
        _COMPONENT mdSrhtDB3LIrbddD9Gvsleqd3Fa9UzN3hrHchuLxm *loader = new _COMPONENT mdSrhtDB3LIrbddD9Gvsleqd3Fa9UzN3hrHchuLxm(m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4,
                                                                                  &mjSo6dt2PHu7B3TkYdZJqIJ33IvR6svFqi55H2Du6,
                                                                                  &loaderState);
        loader->mG9PNSp7le3kPWGBjIemzfbnI03nKguFKnHk1gCrk(true);
        _COMPONENT mdSrhtDB3LIrbddD9Gvsleqd3Fa9UzN3hrHchuLxm::RuntimeMRKGuiComponents.push_back(loader);
        for (int i = 1; i <= 300; i++)
        {
            mjSo6dt2PHu7B3TkYdZJqIJ33IvR6svFqi55H2Du6 = ((float) i) / 300.f;
            _STD this_thread::sleep_for(_STD chrono::milliseconds(10));
        }
        loaderState = 2;
        for (int i = 1; i <= 100; i++)
        {
            mjSo6dt2PHu7B3TkYdZJqIJ33IvR6svFqi55H2Du6 = ((float) i) / 100.f;
            _STD this_thread::sleep_for(_STD chrono::milliseconds(10));
        }
        loader->mG9PNSp7le3kPWGBjIemzfbnI03nKguFKnHk1gCrk(false);
        //sglmain();
        m7y4WTa6PA1SJ5rooPPBhWErWqfdWDDitf6RjoHuS |= 2;
        //_COMPONENT mX1zDqPB9SVyIq8VCHz4vtLYriCeU7sQD8CVbmaaq::RuntimeMRKGuiComponents.push_back(
        //        new _COMPONENT mH4dvOwP7Al49ZaUvsH28wFLmXhNkTRPJBUaz7RSD(m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4));
        //_COMPONENT mX1zDqPB9SVyIq8VCHz4vtLYriCeU7sQD8CVbmaaq::RuntimeMRKGuiComponents.push_back(
        //        new _COMPONENT mr1nYqveBr919HdQfk99gbVOnIDdmoGiugj2UVzq4(m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4));
        //_COMPONENT mX1zDqPB9SVyIq8VCHz4vtLYriCeU7sQD8CVbmaaq::RuntimeMRKGuiComponents.push_back(
        //        new _COMPONENT mAgoYgGQSkbZRBHXUkReZoQ3LuRZek812w2RqGuFp(m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4));
        while (m7rcmEO5lRezOtsm2JcVkMJEykrd6WlyQN4M1AukE)
        {
            mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.Tp2 = _STD chrono::system_clock::now();
            mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.miy7yhGaxQOlTiWA5cHO2WCB0xnXinDnM6fn1arWA = ((_STD chrono::duration<float>) (
                    mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.Tp2 - mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.Tp1)).count();
            mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.Tp1 = mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.Tp2;
            mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.m74Eigw4mBBAYIEhQibQzhzBcfe6rwjUwiOLXbqjb = 1.f / mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin.miy7yhGaxQOlTiWA5cHO2WCB0xnXinDnM6fn1arWA;
            _STD this_thread::sleep_for(mJMtOMGTQy5Xgimaji6ezhTvdYrd1EmDcNCuxVSAP);
            if (mUVt8gjpCIPNgwsNq1moA7FfQSkqY6XfenDNylnn1)
                mUVt8gjpCIPNgwsNq1moA7FfQSkqY6XfenDNylnn1 = false;
            for (_COMPONENT mX1zDqPB9SVyIq8VCHz4vtLYriCeU7sQD8CVbmaaq *component : _COMPONENT mX1zDqPB9SVyIq8VCHz4vtLYriCeU7sQD8CVbmaaq::RuntimeMRKGuiComponents)
            {
                //mp1H22YpLDzAjuZjYuX8a2BsDkZrk8NfxLUIaJY9c concurrent thread could've modified the framerate
                //so we instantly skip all pending updates
                //until we update the framerate
                if (mUVt8gjpCIPNgwsNq1moA7FfQSkqY6XfenDNylnn1 || !component->mZMPtcKrQGO5Tv70YiHjgZxZvzXFR8CzBGawcfAik())
                    continue;
                component->mbBQQ8ZjGGb7I3F8fGa9qidkv5yrSsg9OPwC13uDV();
            }
        }
        pthread_exit(NULL);
    }

    void mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mpIGOCQwtwaiSIPBInvljB8qfGv3ojPgOL3yDGLZi()
    {
        mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.Tp2 = _STD chrono::system_clock::now();
        mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.miy7yhGaxQOlTiWA5cHO2WCB0xnXinDnM6fn1arWA = ((_STD chrono::duration<float>) (
                mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.Tp2 - mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.Tp1)).count();
        mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.Tp1 = mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.Tp2;
        mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.m74Eigw4mBBAYIEhQibQzhzBcfe6rwjUwiOLXbqjb = 1.f / mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4.miy7yhGaxQOlTiWA5cHO2WCB0xnXinDnM6fn1arWA;
        _GUI mm94tBim5gHpZ4oszgi6iJNFgaqHkzJrknc6AUG2Z *displayInfo = GetUIDisplayInfo();
        mwngG50VO0PjiFFGXo0Ct3P5WMQvl0FPA6cwOSuVo(_GUI mLLC1G9g9RusnmNty9KZX82ZwmkBm2e0NqMib4lnu::Context(), displayInfo->mwUAIZwLSJTjCuLehA8VPpTXGZwHncc219d7ruNzi, displayInfo->mIaNvvhpxzdoORTDpylhlYCZ41HRqxpYRBn0g6JFn,
                      displayInfo->m4XVG3ufHqA5kBFob7AuLznPp1TObQjS6sBBFmV0t);
        //only the components can mOUK3mylpz1Yk6tjWOc6ZGRC4z9w1JevNZRzXGAoA the mlv0JacRghI2V6lXNXeMHzKYKuUfVAXddRPxGzQ2i api for now
        _GUI mlv0JacRghI2V6lXNXeMHzKYKuUfVAXddRPxGzQ2i::m8uwMTsVIXpRqSEdAbFlvkVTZFaaTgq8c8ny9p9ys(_GUI mLLC1G9g9RusnmNty9KZX82ZwmkBm2e0NqMib4lnu::Context());
        for (_COMPONENT mX1zDqPB9SVyIq8VCHz4vtLYriCeU7sQD8CVbmaaq *component : _COMPONENT mX1zDqPB9SVyIq8VCHz4vtLYriCeU7sQD8CVbmaaq::RuntimeMRKGuiComponents)
        {
            if (component->mZMPtcKrQGO5Tv70YiHjgZxZvzXFR8CzBGawcfAik())
                component->mHRlREm68AHCNb4IjMWn0zNCsS7o4vrHFJ3yLTRCH(_GUI mLLC1G9g9RusnmNty9KZX82ZwmkBm2e0NqMib4lnu::Context());
        }

        if (mtHZQCUCTlLiABuqMo2joTtDiqC67NUzJHNZRzBzf())
        {
            for (auto proxyComponent : mkMhDXVz46JPcfwSkMQ8LYemn7e8kbIbq7BnnSvZa)
                proxyComponent();
        }

        _GUI mLLC1G9g9RusnmNty9KZX82ZwmkBm2e0NqMib4lnu::miBk5W4JPwbfue2jHMczUP2IAGnzY4JsGsh1peFUr();

        _GUI mlv0JacRghI2V6lXNXeMHzKYKuUfVAXddRPxGzQ2i::mLfKXRcmFakQvDPLXvTl3yBH4tD2zo6ZYOmIrTJAX();
        mMyqsGRCArKfd0zO6wu7PL80Q9w8FwwUDBWawurm1(_GUI mLLC1G9g9RusnmNty9KZX82ZwmkBm2e0NqMib4lnu::Context());
    }

    _GUI mm94tBim5gHpZ4oszgi6iJNFgaqHkzJrknc6AUG2Z *mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::GetUIDisplayInfo()
    {
        return m28mr1IXp050Ei6kw4rmn6c8v0fG3jEbI6uNz9fQ4->Info();
    }

    bool mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mHbNIdBsM46EIbgHCySSJ1DYjF8VCnKopzQD3hjK8()
    {
        return (m7y4WTa6PA1SJ5rooPPBhWErWqfdWDDitf6RjoHuS & 1) != 0;
    }

    void mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mKw8dABLa8xcZsb9hZoQlZxg5jLou7yhg5ks2XrPM()
    {
        pthread_create(&m9h35DiWnvUpBooTkcIqOBXkG2kwD8ttmcJf26wIF, NULL, UpdateComponents, (void *) 0);
    }

    mCuAMfODB569UuzV4u5NfoEGn54kQwF36WEwadIWT *mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::GetUIFramerateInfo()
    {
        return &mboE6i0UY8yDkT66EwWUUOMLvQu6pdha3ulCQELv4;
    }

    mCuAMfODB569UuzV4u5NfoEGn54kQwF36WEwadIWT *mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::GetUpdateFramerateInfo()
    {
        return &mK3bUyHNDjTIwVrDxTuH7GLFDhpQLjGS78V5jhhin;
    }

    bool mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mtHZQCUCTlLiABuqMo2joTtDiqC67NUzJHNZRzBzf()
    {
        return mHbNIdBsM46EIbgHCySSJ1DYjF8VCnKopzQD3hjK8() && (m7y4WTa6PA1SJ5rooPPBhWErWqfdWDDitf6RjoHuS & 2) != 0;
    }

    float mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::mf0dTt17BL38kNiJjD4Hhoe6uCk6jWRHnBeYJXNTl()
    {
        return mFWNm3wjt8JXdkB40sAzTtwReZBMbKEKZhW1YKFVA;
    }

    int mP2kAlMiG3Kb8FzP6tM2QBI7DSS03c42Apgjk0lVK::maVHKfgs9Qy6OwUdHFzgpsZm16tBsVnOvCLDiCLtE(void (*callback)()) {
        mkMhDXVz46JPcfwSkMQ8LYemn7e8kbIbq7BnnSvZa.push_back(callback);
        return mkMhDXVz46JPcfwSkMQ8LYemn7e8kbIbq7BnnSvZa.size() - 1;
    }
}